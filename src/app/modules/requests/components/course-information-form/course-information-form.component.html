<form [formGroup]="form" class="card course-info" (ngSubmit)="onSubmit(form)">
  <div class="card-body">
    <div class="row row-block">
      <div class="col-md-4">
        <h2>Course Details</h2>
        <h4>Add course information:</h4>

        <h5 class="mt-4 mb-0">Course ID: <span>CID123</span></h5>
      </div>
      <div class="col-md-8">
        <div class="row">
          <div class="col-md-6">
            <h3>Program Name</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="courseProgram" [placeholder]="'Choose Program'"
                (selectionChange)="onChangeCourseProgram(); resetValues()">
                <mat-option [value]="program?.id" *ngFor="let program of programs">
                  {{ program?.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <h3>Field of Study</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="courseField" [placeholder]="'Choose Field of Study'"
                [disabled]="!fields || !fields?.length" (selectionChange)="onChangeCourseField()">
                <mat-option [value]="field?.id" *ngFor="let field of fields">
                  {{ field?.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row mt-4" *ngIf="nationalId.toString() === program?.value?.toString()">
          <div class="col-md-6">
            <h3>Select Country</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="courseCountry" [placeholder]="'Choose Country'"
                (selectionChange)="onChangeCourseProgram()">
                <mat-option [value]="country?.id" *ngFor="let country of countries">
                  {{ country?.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <h3>Select Grade Level</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="courseGrade" [placeholder]="'Choose Grade'"
                (selectionChange)="onChangeCourseProgram(); resetValues()">
                <mat-option [value]="i + 1" *ngFor="let grade of grades; let i = index">
                  {{ grade }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-md-6">
            <h3>Subject</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="subject" [placeholder]="'Choose Subject'"
                [disabled]="!subjects || !subjects?.length" (selectionChange)="onChangeCourseSubject()">
                <ng-container *ngFor="let subject of subjects">
                  <mat-option [value]="subject?.id">
                    {{ subject?.name }}
                  </mat-option>
                </ng-container>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <h3>Prefered Tutoring Language</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="language" [placeholder]="'Choose Language'">
                <mat-option [value]="lang?.id" *ngFor="let lang of languages">
                  {{ lang?.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>

    <div class="row row-block">
      <div class="col-md-4">
        <h2>Textbook Details</h2>
        <h4>Provide textbook for this course</h4>
      </div>
      <div class="col-md-8">
        <mat-radio-group aria-label="Select an option" (change)="onChange($event)" formControlName="information">
          <mat-radio-button class="w-100 mb-2" [value]="academicTutoringTextbook.later">
            Textbook not required
          </mat-radio-button>

          <mat-radio-button class="w-100 mb-2" [value]="academicTutoringTextbook.pdf">
            Textbook uploaded in PDF
          </mat-radio-button>

          <mat-radio-button class="w-100 mb-2" [value]="academicTutoringTextbook.info">
            My textbook details listed below
          </mat-radio-button>

          <mat-radio-button class="w-100" [value]="academicTutoringTextbook.none">
            More info will be provided later
          </mat-radio-button>
        </mat-radio-group>

        <div class="row my-3" [@slideInOut] *ngIf="information?.value === academicTutoringTextbook.pdf">
          <div class="col-md-6 upload-textbook">
            <div class="row">
              <div class="col">
                <h5>Upload Textbook</h5>
                <h6>PDF only with Max size of 5M</h6>
              </div>
              <input type="file" hidden #filePicker accept="application/pdf" (change)="onFileUpload($event)">
              <button mat-button type="button" (click)="filePicker.click()">
                <mat-icon>cloud_upload</mat-icon>
                Upload file
              </button>
            </div>
          </div>
          <div class="col-md-12" *ngIf="filePreview">
            <div class="row">
              <div class="col-md-6">
                <div class="block-file d-flex mt-3 align-items-center">
                  <mat-icon>attach_file</mat-icon>
                  <div class="ms-2">
                    <h3>{{ filePreview?.name }}</h3>
                    <h5>{{ filePreview?.size }}</h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row my-3" [@slideInOut] *ngIf="information?.value === academicTutoringTextbook.info">
          <div class="col-md-4">
            <h3>Textbook name *</h3>
            <input type="text" formControlName="name" class="form-control" placeholder="Type name">
          </div>
          <div class="col-md-4">
            <h3>Textbook edition</h3>
            <mat-form-field appearance="outline" class="w-100">
              <mat-select formControlName="edition" [placeholder]="'Choose edition'">
                <mat-option [value]="edition.key" *ngFor="let edition of textbookEditions | keyvalue: returnZero">
                  {{ edition.value }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-4">
            <h3>Textbook author *</h3>
            <input type="text" formControlName="author" class="form-control" placeholder="Type author">
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 overflow-hidden">
        <button mat-flat-button color="primary" class="float-end" type="submit" [disabled]="form.invalid">
          Save & Continue
          <mat-icon>arrow_forward</mat-icon>
        </button>
      </div>
    </div>
  </div>
</form>
