<form [formGroup]="form" (ngSubmit)="submitFormData()" class="w-100 p-10-sm">
  <div>
    <h4 class="mb-5 heading text-center f-size-17-md-sm mb-15-sm">PROVIDE YOUR PERSONAL INFORMATION</h4>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="middleName" class="form-label">Middle Name <span>(Optional)</span></label>
          <input type="text" class="custom-input w-100 input-bordered" id="middleName" placeholder="Enter Middle Name"
            formControlName="middleName" meTutorsLettersOnly>
          <div class="text-danger" *ngIf="middleName?.touched && middleName?.invalid">
            Please write a valid name
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label for="nationality" class="form-label">Nationality</label>
          <mat-form-field appearance="outline" class="w-100">
            <mat-select formControlName="nationality" [placeholder]="'Select your nationality'">
              <mat-option>
                <ngx-mat-select-search [(ngModel)]="filterNationality" [ngModelOptions]="{standalone: true}"
                  placeholderLabel="Search..." noEntriesFoundLabel="No matching country found">
                </ngx-mat-select-search>
              </mat-option>
              <mat-option *ngFor="let country of filteredNationalities" [value]="country.name">
                {{ country.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <div class="text-danger" *ngIf="nationality?.touched && nationality?.invalid">
            Please choose your Nationality
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="dateOfBirth" class="form-label">Date of Birth</label>
          <mat-form-field appearance="outline" class="w-100">
            <input matInput [matDatepicker]="datetPicker" [placeholder]="'Select Your Date of Birth'"
              (focus)="datetPicker.open()" formControlName="dateOfBirth" [max]="maxDate" readonly>
            <mat-datepicker-toggle matSuffix [for]="datetPicker"></mat-datepicker-toggle>
            <mat-datepicker #datetPicker></mat-datepicker>
          </mat-form-field>
          <div class="text-danger" *ngIf="dateOfBirth?.touched && dateOfBirth?.invalid">
            Please select your Date of Birth
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label for="address" class="form-label">Address 1</label>
          <input type="text" class="custom-input w-100 input-bordered" id="address" placeholder="Enter Street Address"
            formControlName="address">
          <div class="text-danger" *ngIf="address?.touched && address?.invalid">
            Please write your Address with a max of 120 characters
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="gender" class="form-label">Select Gender</label>
          <mat-form-field appearance="outline" class="w-100">
            <mat-select formControlName="gender" [placeholder]="'Male'">
              <mat-option [value]="gender" *ngFor="let gender of genders">{{ gender }}</mat-option>
            </mat-select>
          </mat-form-field>
          <div class="text-danger" *ngIf="gender?.touched && gender?.invalid">
            Please choose your Gender
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label for="address2" class="form-label">Address 2 <span>(Optional)</span></label>
          <input type="text" class="custom-input w-100 input-bordered" id="address2" placeholder="Enter street address"
            formControlName="address2">
          <div class="text-danger" *ngIf="address2?.touched && address2?.invalid">
            Please write your Address with a max of 120 characters
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="bio" class="form-label">Add Biography <span>(write about your teaching experience to let students
              know why you are the best tutor for them)</span>
            <metutors-char-counter [limit]="400" [controlName]="bio"></metutors-char-counter>
          </label>
          <textarea class="custom-input w-100 input-bordered" [placeholder]="'Add Bio here... '" rows="5"
            formControlName="bio" minlength="200" maxlength="400"></textarea>
          <small class="text-danger">(200 to 400 characters)</small>
          <div class="text-danger" *ngIf="bio?.touched && bio?.invalid">
            Please write your Bio
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
          <label for="postalCode" class="form-label">Postal Code</label>
          <input type="text" class="custom-input w-100 input-bordered" id="postalCode" placeholder="Postal Code"
            formControlName="postalCode">
          <div class="text-danger" *ngIf="postalCode?.touched && postalCode?.invalid">
            Please write a valid Postal Code
          </div>
        </div>

        <div class="form-group">
          <label for="country" class="form-label">Country</label>
          <mat-form-field appearance="outline" class="w-100">
            <mat-select formControlName="country" [placeholder]="'Select Country'"
              (selectionChange)="loadCities.emit(country?.value); resetCity()">
              <mat-option>
                <ngx-mat-select-search [(ngModel)]="filterCountry" [ngModelOptions]="{standalone: true}"
                  placeholderLabel="Search..." noEntriesFoundLabel="No matching country found">
                </ngx-mat-select-search>
              </mat-option>
              <mat-option *ngFor="let country of filteredCountries" [value]="country.id">{{ country.name }}</mat-option>
            </mat-select>
          </mat-form-field>
          <div class="text-danger" *ngIf="country?.touched && country?.invalid">
            Please choose your Country
          </div>
        </div>

        <div class="form-group">
          <label for="city" class="form-label">City</label>
          <mat-form-field appearance="outline" class="w-100">
            <mat-select formControlName="city" [placeholder]="'Select city'" [disabled]="!cities || !cities.length">
              <mat-option>
                <ngx-mat-select-search [(ngModel)]="filterCity" [ngModelOptions]="{standalone: true}"
                  placeholderLabel="Search..." noEntriesFoundLabel="No matching city found">
                </ngx-mat-select-search>
              </mat-option>
              <mat-option *ngFor="let city of filteredCities" [value]="city.name">{{ city.name }}</mat-option>
            </mat-select>
          </mat-form-field>
          <div class="text-danger" *ngIf="city?.touched && city?.invalid">
            Please choose your City
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex align-items-center justify-content-between mt-4 mb-2">
      <div></div>

      <metutors-submit-button [form]="form" [isSubmitting]="loading" [extraClasses]="'w-100 fw-bold px-5'">
        Save & Continue
      </metutors-submit-button>
    </div>
  </div>
</form>
