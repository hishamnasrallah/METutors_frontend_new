<form #f="ngForm" class="account-settings" [formGroup]="form" (ngSubmit)="onSubmit(form)">
  <div class="avatar-block">
    <div class="row mb-3">
      <div class="col-md-12 d-flex">
        <!-- <mat-icon *ngIf="!profilePic" class="person">person</mat-icon> -->
        <div class="person">
          <img id="output" />
        </div>
        <div>
          <h2>Upload profile photo</h2>
          <h5>JPG, GIF or PNG. Max size of 800K</h5>
          <div style="height:0;overflow:hidden">
            <input type="file" id="fileInput" name="fileInput" (change)="uploadProfilePic($event)" />
          </div>
          <button mat-button type="button" (click)="upload()" [disabled]="subloading">
            <mat-icon>cloud_upload</mat-icon>
            Upload file
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-md-6 form-group">
      <h3>First Name</h3>
      <input type="text" class="form-control custom-input input-bordered" placeholder="Ex: Mohamed" formControlName="firstName">
       <div class="text-danger" *ngIf="firstName?.['touched'] && firstName?.errors?.['required']">
        Please write your First Name
      </div>
      <div class="text-danger" *ngIf="firstName?.['touched'] && firstName?.errors?.['pattern']">
        First Name should only contains alphabets
      </div>
      <div class="text-danger"
        *ngIf="firstName?.['touched'] && firstName?.errors?.['minlength'] && !firstName?.errors?.['required'] && !firstName?.errors?.['pattern']">
        First Name cannot be less than 3 characters
      </div>
      <div class="text-danger" *ngIf="firstName?.['touched'] && firstName?.errors?.['maxlength'] && !firstName?.errors?.['pattern']">
        First Name cannot be greater than 100 characters
      </div>
    </div>
  </div>
  <div class="row mb-3 form-group">
    <div class="col-md-6">
      <h3>Last Name</h3>
      <input type="text" class="form-control custom-input input-bordered" placeholder="Ex: Ahmed" formControlName="lastName">
       <div class="text-danger" *ngIf="lastName?.['touched'] && lastName?.errors?.['required']">
        Please write your Last Name
      </div>
      <div class="text-danger" *ngIf="lastName?.['touched'] && lastName?.errors?.['pattern']">
        Last Name should only contains alphabets
      </div>
      <div class="text-danger"
        *ngIf="lastName?.['touched'] && lastName?.errors?.['minlength'] && !lastName?.errors?.['required'] && !lastName?.errors?.['pattern']">
        Last Name cannot be less than 3 characters
      </div>
      <div class="text-danger" *ngIf="lastName?.['touched'] && lastName?.errors?.['maxlength'] && !lastName?.errors?.['pattern']">
        Last Name cannot be greater than 100 characters
      </div>
    </div>
  </div>
  <div class="row mb-3 form-group">
    <div class="col-md-6">
      <h3>Email address</h3>
      <input type="email" class="form-control custom-input input-bordered" placeholder="Ex: xxx@xxx.com" formControlName="email" email>
       <div class="text-danger" *ngIf="email?.['touched'] && email?.errors?.['required']">
        Please write your Email
      </div>
      <div class="text-danger" *ngIf="email?.['touched'] && !email?.errors?.['required'] && email?.errors?.['email']">
        Email is not valid
      </div>
      <div class="text-danger"
        *ngIf="email?.['touched'] && !email?.errors?.['required'] && !email?.errors?.['email'] && email?.errors?.['maxlength']">
        Email cannot be more than 100 characters
      </div>
    </div>
  </div>
  <div class="row mb-3 form-group">
    <div class="col-md-6">
      <h3>Phone Number</h3>
      <!-- [selectedCountryISO]="selectedCountry" -->
      <ngx-intl-tel-input [cssClass]="'custom-input w-100 input-bordered'" [preferredCountries]="preferredCountries"
        [enableAutoCountrySelect]="true" [enablePlaceholder]="true" [searchCountryFlag]="true"
        [selectFirstCountry]="true" [phoneValidation]="true" [separateDialCode]="true"
        (input)="verifyPhoneNumber($event)" formControlName="mobileNumber">
      </ngx-intl-tel-input>
       <div class="text-danger" *ngIf="f.form.controls['mobileNumber'].touched && !f.form.value.mobileNumber">
        Phone Number is Required
      </div>
      <div class="text-danger"
        *ngIf="f.form.controls['mobileNumber'].touched && f.form.value.mobileNumber && !numberOnly">
        Phone Number should contains digits only
      </div>
      <div class="text-danger"
        *ngIf="f.form.controls['mobileNumber'].touched && f.form.value.mobileNumber && numberOnly && !minPhone">
        Phone Number cannot be less than 5 digits
      </div>
      <div class="text-danger"
        *ngIf="f.form.controls['mobileNumber'].touched && f.form.value.mobileNumber && numberOnly && !maxPhone">
        Phone Number cannot be greater than 15 digits
      </div>
    </div>
  </div>
  <div class="row btn-list">
    <div class="col-12 d-flex justify-content-end">
      <button mat-flat-button color="primary" type="submit"
        [disabled]="form.invalid || loading || !f.form.value.mobileNumber || !profilePic || !numberOnly || !minPhone || !maxPhone">Update
        <mat-icon class="spinner" *ngIf="loading">autorenew</mat-icon>
      </button>
    </div>
  </div>
</form>
