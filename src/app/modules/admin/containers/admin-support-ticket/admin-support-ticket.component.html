<div class="my-tickets">
  <div class="row">
    <div class="col-md-12">
      <mat-tab-group mat-align-tabs="start" (selectedTabChange)="onChangeTab($event)">
        <mat-tab label="All">
          <div class="mt-2">
            <ng-container *ngIf="!(isLoading$ | async)">
              <div class="row filters">
                <div class="col-md-9">
                  <span class="title">Filters</span>
                  <mat-form-field appearance="outline" class="me-2">
                    <mat-select [placeholder]="'By Priority'" [(ngModel)]="priority" (selectionChange)="onChangeSelection()">
                      <mat-option [value]="priority?.id" *ngFor="let priority of priorities$ | async">
                        {{ priority?.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-select [placeholder]="'By Category'" [(ngModel)]="category" (selectionChange)="onChangeSelection()">
                      <mat-option [value]="category?.id" *ngFor="let category of categories$ | async">
                        {{ category?.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-3">
                  <div class="position-relative search-request">
                    <mat-icon>search</mat-icon>
                    <input type="text" class="form-control custom-input input-bordered" [(ngModel)]="title"
                      placeholder="Search..." (keyup)="onChangeSelection()">
                  </div>
                </div>
              </div>
              <metutors-support-ticket-card *ngFor="let ticket of tickets$ | async" [ticket]="ticket" [isAdmin]="true"
                                            [linkUrl]="'/admin/support-ticket/ticket-details/' + ticket?.ticketId"
                                            [ticketId]="ticketId" [isChangeStatus]="(isChangeTicketStatus$ | async)!"
                                            (changeStatus)="onChangeTicketStatus($event)">
              </metutors-support-ticket-card>
      
              <div class="text-center py-5 no-data" *ngIf="!(tickets$ | async) || !(tickets$ | async)?.length">
                No Tickets found
              </div>
            </ng-container>
      
            <ng-container *ngIf="isLoading$ | async">
              <div class="card" *ngFor="let _ of [1, 2, 3]">
                <div class="card-body">
                  <metutors-grid-placeholder></metutors-grid-placeholder>
                </div>
              </div>
            </ng-container>
          </div>
        </mat-tab>
        <mat-tab label="Open">
          <div class="mt-2">
            <ng-container *ngIf="!(isLoading$ | async)">
              <div class="row filters">
                <div class="col-md-9">
                  <span class="title">Filters</span>
                  <mat-form-field appearance="outline" class="me-2">
                    <mat-select [placeholder]="'By Priority'" [(ngModel)]="priority" (selectionChange)="onChangeSelection()">
                      <mat-option [value]="priority?.id" *ngFor="let priority of priorities$ | async">
                        {{ priority?.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-select [placeholder]="'By Category'" [(ngModel)]="category" (selectionChange)="onChangeSelection()">
                      <mat-option [value]="category?.id" *ngFor="let category of categories$ | async">
                        {{ category?.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-3">
                  <div class="position-relative search-request">
                    <mat-icon>search</mat-icon>
                    <input type="text" class="form-control custom-input input-bordered" [(ngModel)]="title"
                      placeholder="Search..." (keyup)="onChangeSelection()">
                  </div>
                </div>
              </div>
              <metutors-support-ticket-card *ngFor="let ticket of tickets$ | async" [ticket]="ticket" [isAdmin]="true"
                                            [linkUrl]="'/admin/support-ticket/ticket-details/' + ticket?.ticketId"
                                            [ticketId]="ticketId" [isChangeStatus]="(isChangeTicketStatus$ | async)!"
                                            (changeStatus)="onChangeTicketStatus($event)">
              </metutors-support-ticket-card>
      
              <div class="text-center py-5 no-data" *ngIf="!(tickets$ | async) || !(tickets$ | async)?.length">
                No Tickets found
              </div>
            </ng-container>
      
            <ng-container *ngIf="isLoading$ | async">
              <div class="card" *ngFor="let _ of [1, 2, 3]">
                <div class="card-body">
                  <metutors-grid-placeholder></metutors-grid-placeholder>
                </div>
              </div>
            </ng-container>
          </div>
        </mat-tab>
        <mat-tab label="Closed">
          <div class="mt-2">
            <ng-container *ngIf="!(isLoading$ | async)">
              <div class="row filters">
                <div class="col-md-9">
                  <span class="title">Filters</span>
                  <mat-form-field appearance="outline" class="me-2">
                    <mat-select [placeholder]="'By Priority'" [(ngModel)]="priority" (selectionChange)="onChangeSelection()">
                      <mat-option [value]="priority?.id" *ngFor="let priority of priorities$ | async">
                        {{ priority?.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-select [placeholder]="'By Category'" [(ngModel)]="category" (selectionChange)="onChangeSelection()">
                      <mat-option [value]="category?.id" *ngFor="let category of categories$ | async">
                        {{ category?.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-md-3">
                  <div class="position-relative search-request">
                    <mat-icon>search</mat-icon>
                    <input type="text" class="form-control custom-input input-bordered" [(ngModel)]="title"
                      placeholder="Search..." (keyup)="onChangeSelection()">
                  </div>
                </div>
              </div>
              <metutors-support-ticket-card *ngFor="let ticket of tickets$ | async" [ticket]="ticket" [isAdmin]="true"
                                            [linkUrl]="'/admin/support-ticket/ticket-details/' + ticket?.ticketId"
                                            [ticketId]="ticketId" [isChangeStatus]="(isChangeTicketStatus$ | async)!"
                                            (changeStatus)="onChangeTicketStatus($event)">
              </metutors-support-ticket-card>
      
              <div class="text-center py-5 no-data" *ngIf="!(tickets$ | async) || !(tickets$ | async)?.length">
                No Tickets found
              </div>
            </ng-container>
      
            <ng-container *ngIf="isLoading$ | async">
              <div class="card" *ngFor="let _ of [1, 2, 3]">
                <div class="card-body">
                  <metutors-grid-placeholder></metutors-grid-placeholder>
                </div>
              </div>
            </ng-container>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>